<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Letter for My Sayang</title>
    <!-- Link to your external CSS file -->
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Daisy Petals Background (Floating) -->
    <div class="petal" style="left: 10%; top: 10%; width: 25px; height: 25px;"></div>
    <div class="petal" style="left: 25%; top: 30%; width: 35px; height: 35px;"></div>
    <div class="petal" style="left: 40%; top: 5%; width: 30px; height: 30px;"></div>
    <div class="petal" style="left: 60%; top: 40%; width: 20px; height: 20px;"></div>
    <div class="petal" style="left: 80%; top: 20%; width: 40px; height: 40px;"></div>
    <div class="petal" style="left: 15%; top: 60%; width: 28px; height: 28px;"></div>
    <div class="petal" style="left: 50%; top: 70%; width: 32px; height: 32px;"></div>
    <div class="petal" style="left: 75%; top: 85%; width: 22px; height: 22px;"></div>
    <div class="petal" style="left: 5%; top: 90%; width: 38px; height: 38px;"></div>
    <div class="petal" style="left: 90%; top: 55%; width: 27px; height: 27px;"></div>

    <!-- Static Daisies under the envelope -->
    <div class="daisy-cluster-bottom">
        <div class="static-daisy daisy-1"><div class="center-dot"></div></div>
        <div class="static-daisy daisy-2"><div class="center-dot"></div></div>
        <div class="static-daisy daisy-3"><div class="center-dot"></div></div>
    </div>

    <!-- Envelope Structure -->
    <div class="envelope-container" id="envelopeContainer">
        <div class="envelope-flap" id="envelopeFlap">
            A Special Letter for My Sayang ❤️
            <span>(Slide to open)</span>
        </div>
    </div>

    <!-- Letter Content (Initially Hidden) -->
    <div class="letter-content" id="letterContent">
        <div class="letter-section">
            <h2>I'm So Sorry, Sayang...</h2>
            <p>
                Dah lama kan saya tak tulis surat dekat awak kan sayang? Takpa kalini surat special sikit. 
				Sebab sayang baru kluar hospital!!! Soo surat happy2 untuk sayanggggg!!!
            </p>
        </div>

        <div class="letter-section">
            <h2>Si Bijak Saya</h2>
            <p>
                tak la happy sangat surat ni sebab ye laa. Saya kenaaaaa mintaaa maaf dekat sayang sayaaa. Saya banyak takdan nak pujuk sayang sayaaa yang cantik ni. KALINI!!! real punyaaaa pujuk HAHAHAHAHHA mesti lah kan sayaaa kena pujuk sayang. 
				TAKKAN JIRAN PULA KAN? HAHAHAHAH AYANG OMOOO COMEL NYA SAYANGGGG SAYAA ARGHHH!!!!!
            </p>
            <img src="images/image(3).jpeg" alt="Our funny memory">
        </div>

        <div class="letter-section">
            <h2>Yang paling cantik tuu!!</h2>
            <p>
                Tak kira macam mana saya sekali pun, saya sayang awak sangat-sangat. Alaaa macam saya cakap sokmo tuuu,
				iTU KALAU ADA MODEL TU, SAYA TAK PANDANG DORANG DAH, TUTUP MATAAAA SAYA PERGI DEKAT AWAK AHAHAHA . well, mesti lah awak saja yang adaaa dihati sayaa!!
            </p>
            <img src="images/image(1).jpeg" alt="A photo representing her qualities">
        </div>

        <div class="letter-section">
            <h2>cinta hati sayaaa!!</h2>
            <p>
                Yesterday kan saya minta maaf sangat2. Ye laa sayaaa tak dapat khabr sayang dh bgun ke belom. TIBA2 NAK PUTUS. GUGUR JANTUNG SAYAAAAAAAAA YANG HAIHHHH AHAHAHHAHA. Saya amik masa sikit nk reply semalam your text sebab saya taknak awak kena tempias ke apa ke. Awak tau saya tak nak lansung marah awakkk. Ye sayang, awak dah la dekst hospital tiba2 prank camtu. 
				Takut au oranggggggg. ALALALLALA MEH PELOK SAYANGG! RINDU NYA CINTAAAAAAAAAAAAAA!
            </p>
            <img src="images/image(4).jpeg" alt="An adventure photo">
        </div>

        <div class="letter-section">
            <h2>princessss,</h2>
            <p>
                Disebab kan sayaaaaaaaaa buat silap kan? Mesti lah saya kena minta maaf. Maafkan saya sayangg. 
				Cinta, saya  minta maaf sangat. Saya patut lebih lebih tenang tapi saya tak semalam. Penat kot? Hehehe maaf kan nini tau nana? comeback here. saya rindu awak ni. banyak mana? BANYAK BANYAK
            </p>
            <img src="images/image(2).jpeg" alt="A photo representing future hopes">
        </div>

        <div class="letter-footer">
            Saya sayang awak seikhlas hati saya, <br> Your Nini ❤️
        </div>
    </div>

    <script>
        const envelopeFlap = document.getElementById('envelopeFlap');
        const envelopeContainer = document.getElementById('envelopeContainer');
        const letterContent = document.getElementById('letterContent');
        let isDragging = false;
        let initialY;
        let flapInitialTop = 0; // The initial 'top' style property of the flap

        // Function to open the letter
        function openLetter() {
            // Add class to animate envelope away
            envelopeContainer.classList.add('open');

            // Show letter content after envelope animation starts
            setTimeout(() => {
                letterContent.classList.add('show');
                // Trigger glow animation after content is fully visible
                setTimeout(() => {
                    letterContent.classList.add('glow');
                }, 1000); // Allow 1 second for basic show transition
            }, 800); // Match this to envelope transition duration
        }

        // --- Mouse Events ---
        envelopeFlap.addEventListener('mousedown', (e) => {
            isDragging = true;
            envelopeFlap.classList.add('dragging');
            initialY = e.clientY;
            // Get current 'top' value, parse as float, or default to 0 if not set
            flapInitialTop = parseFloat(getComputedStyle(envelopeFlap).top) || 0;
            e.preventDefault(); // Prevent default drag behavior
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;

            const deltaY = e.clientY - initialY;
            let newTop = flapInitialTop + deltaY;

            // Ensure flap doesn't go above its original position (0)
            // Or too far down (e.g., 80% of envelope height)
            newTop = Math.max(0, Math.min(newTop, envelopeContainer.offsetHeight * 0.8));

            envelopeFlap.style.top = `${newTop}px`;
        });

        document.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                envelopeFlap.classList.remove('dragging');

                // Check if the flap is pulled down enough to open (e.g., 50% of its own height)
                const flapHeight = envelopeFlap.offsetHeight;
                const currentTop = parseFloat(getComputedStyle(envelopeFlap).top);

                if (currentTop >= flapHeight * 0.5) {
                    // It's open! Animate the flap down completely and open the letter
                    envelopeFlap.style.top = '100%'; // Animate flap to bottom
                    envelopeFlap.style.transition = 'top 0.5s ease-out'; // Smooth transition for auto-open
                    setTimeout(openLetter, 500); // Give flap time to animate
                } else {
                    // Not enough, snap back
                    envelopeFlap.style.top = '0';
                    envelopeFlap.style.transition = 'top 0.3s ease-in-out';
                }
            }
        });

        // --- Touch Events (for mobile) ---
        envelopeFlap.addEventListener('touchstart', (e) => {
            isDragging = true;
            envelopeFlap.classList.add('dragging');
            initialY = e.touches[0].clientY;
            flapInitialTop = parseFloat(getComputedStyle(envelopeFlap).top) || 0;
            e.preventDefault(); // Prevent scrolling
        }, { passive: false }); // Use passive: false to allow preventDefault

        document.addEventListener('touchmove', (e) => {
            if (!isDragging) return;

            const deltaY = e.touches[0].clientY - initialY;
            let newTop = flapInitialTop + deltaY;

            newTop = Math.max(0, Math.min(newTop, envelopeContainer.offsetHeight * 0.8));

            envelopeFlap.style.top = `${newTop}px`;
        }, { passive: false });

        document.addEventListener('touchend', () => {
            if (isDragging) {
                isDragging = false;
                envelopeFlap.classList.remove('dragging');

                const flapHeight = envelopeFlap.offsetHeight;
                const currentTop = parseFloat(getComputedStyle(envelopeFlap).top);

                if (currentTop >= flapHeight * 0.5) {
                    envelopeFlap.style.top = '100%';
                    envelopeFlap.style.transition = 'top 0.5s ease-out';
                    setTimeout(openLetter, 500);
                } else {
                    envelopeFlap.style.top = '0';
                    envelopeFlap.style.transition = 'top 0.3s ease-in-out';
                }
            }
        });
    </script>
</body>
</html>
